<?php

/**
 * Hostinger API PHP SDK
 *
 * API Version: 0.0.99
 * @url https://github.com/hostinger/api-php-sdk
 *
 * NOTE: This file is auto-generated, DO NOT EDIT THIS FILE MANUALLY!
 * If you want to contribute or request a new feature, please create an issue or pull request on https://github.com/hostinger/api
 */

namespace Hostinger;

use Exception;
use GuzzleHttp\Exception\ConnectException;
use GuzzleHttp\Exception\RequestException;
use Psr\Http\Message\ResponseInterface;

class ApiException extends Exception
{
    public function __construct(
        string $message = "",
        int $code = 0,
        private readonly ?ResponseInterface $response = null,
    ) {
        parent::__construct($message, $code);
    }

    public function getResponse(): ?ResponseInterface
    {
        return $this->response;
    }

    public static function fromRequestException(RequestException $e): self
    {
        return new self(
            message: "[{$e->getCode()}] {$e->getMessage()}",
            code: (int) $e->getCode(),
            response: $e->getResponse(),
        );
    }

    public static function fromConnectException(ConnectException $e): self
    {
        return new self(
           message: "[{$e->getCode()}] {$e->getMessage()}",
           code: (int) $e->getCode(),
       );
    }
}
